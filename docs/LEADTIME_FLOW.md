# Luá»“ng TÃ­nh Leadtime - NgÃ y Giao HÃ ng

## 1. Tá»•ng quan

Há»‡ thá»‘ng tÃ­nh toÃ¡n ngÃ y giao hÃ ng dá»±a trÃªn 3 yáº¿u tá»‘ chÃ­nh:
- **Kho xuáº¥t hÃ ng** (KHOHCM / KHOBD)
- **TÃ¬nh tráº¡ng tá»“n kho** (CÃ²n hÃ ng / Háº¿t hÃ ng)
- **ThÃ´ng tin Ä‘Æ¡n hÃ ng** (Quáº­n, khuyáº¿n mÃ£i, thá»i gian Ä‘áº·t)

---

## 2. Luá»“ng quyáº¿t Ä‘á»‹nh chÃ­nh

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Báº®T Äáº¦U TÃNH NGÃ€Y GIAO                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚ CÃ³ thÃ´ng tin Leadtime Quáº­n?     â”‚
            â”‚ (districtLeadtime tá»« sales)     â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚                    â”‚
                  YES                   NO
                   â”‚                    â”‚
                   â–¼                    â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ LOGIC 2025             â”‚   â”‚ LOGIC LEGACY          â”‚
    â”‚ (Æ¯u tiÃªn cao nháº¥t)     â”‚   â”‚ (TÆ°Æ¡ng thÃ­ch ngÆ°á»£c)   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. Luá»“ng Logic 2025 (Khi cÃ³ Leadtime Quáº­n)

### BÆ°á»›c 1: Kiá»ƒm tra tá»“n kho

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    KIá»‚M TRA Tá»’N KHO                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ Sá»‘ lÆ°á»£ng Ä‘áº·t > Tá»“n kho?       â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚                    â”‚
                    YES                   NO
                     â”‚                    â”‚
                     â–¼                    â–¼
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚    Háº¾T HÃ€NG       â”‚   â”‚    CÃ’N HÃ€NG       â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### BÆ°á»›c 2: TÃ­nh toÃ¡n theo tá»«ng trÆ°á»ng há»£p

#### ğŸ“¦ TrÆ°á»ng há»£p A: CÃ’N HÃ€NG

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CÃ’N HÃ€NG + LEADTIME QUáº¬N                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚ TÃ­nh 24/7 (T7 + CN Ä‘á»u tÃ­nh)    â”‚
            â”‚ Base = districtLeadtime (ca)    â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚ Warehouse = KHOHCM?             â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚                    â”‚
                  YES                   NO
                   â”‚                    â”‚
                   â–¼                    â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ KHOHCM: Check     â”‚   â”‚ KHOBD: Giá»¯       â”‚
        â”‚ CN rÆ¡i vÃ o CN?    â”‚   â”‚ nguyÃªn káº¿t quáº£   â”‚
        â”‚ â†’ Dá»i T2 08:00    â”‚   â”‚ (24/7)           â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Káº¿t quáº£:**
- KHOBD: Káº¿t quáº£ tá»« 24/7
- KHOHCM: Káº¿t quáº£ 24/7 + Ä‘iá»u chá»‰nh CN

---

#### ğŸ“¦ TrÆ°á»ng há»£p B: Háº¾T HÃ€NG

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Háº¾T HÃ€NG + LEADTIME QUáº¬N                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚ ThÃªm ca bá»• sung theo kho        â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚ Apollo/Kim TÃ­n? â†’ +6 ca (tá»‘i Ä‘a)         â”‚
      â”‚ KhÃ´ng:                                     â”‚
      â”‚   - KHOHCM â†’ +2 ca                        â”‚
      â”‚   - KHOBD â†’ +4 ca                         â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚ Tá»•ng ca = district + bá»• sung    â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚ KHOHCM?                         â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚                    â”‚
                  YES                   NO
                   â”‚                    â”‚
                   â–¼                    â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Skip Weekend     â”‚   â”‚ TÃ­nh 24/7        â”‚
        â”‚ (Mon-Fri only)   â”‚   â”‚ (T7+CN tÃ­nh)     â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚ KHOHCM? â†’ Äiá»u chá»‰nh CN        â”‚
            â”‚ CN hoáº·c T7â‰¥12:00 â†’ T2 08:00     â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**VÃ­ dá»¥:**
- KHOHCM + 2 ca quáº­n + háº¿t hÃ ng = 4 ca â†’ Skip weekend
- KHOBD + 2 ca quáº­n + háº¿t hÃ ng = 6 ca â†’ 24/7
- KHOHCM + Apollo = district + 6 ca â†’ Skip weekend

---

## 4. Luá»“ng Logic 2025 (KhÃ´ng cÃ³ Leadtime Quáº­n)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              KHÃ”NG CÃ“ LEADTIME QUáº¬N                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚ Háº¿t hÃ ng?                       â”‚
            â”‚ (ÄÆ¡n hÃ ng > Tá»“n kho)            â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚                    â”‚
                  YES                   NO
                   â”‚                    â”‚
                   â–¼                    â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ TÃ­nh theo        â”‚   â”‚ LOGIC LEGACY     â”‚
        â”‚ kho (khÃ´ng quáº­n) â”‚   â”‚ (pháº§n 5)         â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Báº£ng tÃ­nh khi khÃ´ng cÃ³ quáº­n + háº¿t hÃ ng:**

| Kho | BÃ¬nh thÆ°á»ng | Apollo/Kim TÃ­n |
|-----|-------------|----------------|
| KHOHCM | +2 ca (Skip weekend) | +6 ca (Skip weekend) |
| KHOBD | +4 ca (24/7) | +6 ca (24/7) |

---

## 5. Luá»“ng Logic Legacy (KhÃ´ng cÃ³ tham sá»‘ má»›i)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    LOGIC LEGACY                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚ Æ¯u tiÃªn 1: Promotion?           â”‚
            â”‚ - CÃ³ promotion chá»n             â”‚
            â”‚ - cr1bb_leadtimepromotion â‰  rá»—ng â”‚
            â”‚ - PhÃ¢n loáº¡i = 'HÃ£ng' hoáº·c null   â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚                    â”‚
                  YES                   NO
                   â”‚                    â”‚
                   â–¼                    â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ + (promo * 12h)  â”‚   â”‚ Æ¯u tiÃªn 2: KhÃ¡ch hÃ ng Shop?   â”‚
        â”‚ (24/7 + adjust)  â”‚   â”‚ varNganhNghe === 'Shop'        â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚                    â”‚
                                      YES                   NO
                                       â”‚                    â”‚
                                       â–¼                    â–¼
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚ + (quanhuyen*12) â”‚   â”‚ Æ¯u tiÃªn 3: Háº¿t hÃ ng?   â”‚
                            â”‚ (24/7 + adjust)  â”‚   â”‚ (requested > stock)    â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                      â”‚                    â”‚
                                                     YES                   NO
                                                      â”‚                    â”‚
                                                      â–¼                    â–¼
                                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                           â”‚ Weekend Reset!   â”‚   â”‚ Default:         â”‚
                                           â”‚ + SP_leadtime    â”‚   â”‚ +1 working day   â”‚
                                           â”‚ (T7>12/CNâ†’T2)    â”‚   â”‚ (Mon-Fri)        â”‚
                                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 6. Báº£ng quyáº¿t Ä‘á»‹nh tá»•ng há»£p

### 6.1 Theo tÃ¬nh huá»‘ng

| # | TÃ¬nh huá»‘ng | Quáº­n | Tá»“n | Kho | Weekend | CÃ´ng thá»©c |
|---|------------|------|-----|-----|---------|-----------|
| 1 | Má»›i + CÃ²n | âœ… | âœ… CÃ²n | KHOHCM | CN adjust | district * 12h |
| 2 | Má»›i + CÃ²n | âœ… | âœ… CÃ²n | KHOBD | KhÃ´ng | district * 12h |
| 3 | Má»›i + Háº¿t | âœ… | âŒ Háº¿t | KHOHCM | Skip | (dist + 2) * 12h |
| 4 | Má»›i + Háº¿t | âœ… | âŒ Háº¿t | KHOBD | KhÃ´ng | (dist + 4) * 12h |
| 5 | Má»›i + Háº¿t + Apollo | âœ… | âŒ Háº¿t | Any | Theo kho | (dist + 6) * 12h |
| 6 | Má»›i + Háº¿t | âŒ | âŒ Háº¿t | KHOHCM | Skip | 2 * 12h |
| 7 | Má»›i + Háº¿t | âŒ | âŒ Háº¿t | KHOBD | KhÃ´ng | 4 * 12h |
| 8 | Legacy Promo | âŒ | - | - | - | promo * 12h |
| 9 | Legacy Shop | âŒ | - | - | - | quanhuyen * 12h |
| 10 | Legacy OOS | âŒ | âŒ Háº¿t | - | Reset | SP_leadtime ngÃ y |
| 11 | Legacy Default | âŒ | âœ… CÃ²n | - | Skip | +1 working day |

### 6.2 Äiá»u chá»‰nh Chá»§ nháº­t (KHOHCM only)

| NgÃ y giao tÃ­nh | Giá» | Káº¿t quáº£ |
|---------------|-----|---------|
| Thá»© 7 | < 12:00 | Giá»¯ nguyÃªn |
| Thá»© 7 | â‰¥ 12:00 | â†’ Thá»© 2, 08:00 |
| Chá»§ nháº­t | Any | â†’ Thá»© 2, 08:00 |

### 6.3 Ca bá»• sung cho hÃ ng háº¿t kho

| Loáº¡i | KHOHCM | KHOBD |
|------|--------|-------|
| BÃ¬nh thÆ°á»ng | +2 ca | +4 ca |
| Apollo/Kim TÃ­n | +6 ca | +6 ca |

---

## 7. VÃ­ dá»¥ minh há»a

### VÃ­ dá»¥ 1: KHOHCM + CÃ²n hÃ ng + Quáº­n 2 ca
```
Input: T6 18:00, district=2, cÃ²n hÃ ng
TÃ­nh: 18:00 T6 + 24h = 18:00 T7
Adjust: T7 18:00 â‰¥ 12:00 â†’ T2 08:00
Output: Thá»© 2, 08:00
```

### VÃ­ dá»¥ 2: KHOHCM + Háº¿t hÃ ng + Quáº­n 2 ca
```
Input: T4 10:00, district=2, háº¿t hÃ ng
TÃ­nh: Tá»•ng = 2 + 2 = 4 ca = 48h
KHOHCM skip weekend â†’ T4 10:00 â†’ T6 10:00
Output: Thá»© 6, 10:00
```

### VÃ­ dá»¥ 3: KHOBD + Háº¿t hÃ ng + Apollo
```
Input: T7 10:00, district=2, háº¿t hÃ ng, Apollo
TÃ­nh: Tá»•ng = 2 + 6 = 8 ca = 96h
KHOBD 24/7 â†’ T7 10:00 + 96h = CN 10:00
Output: Chá»§ nháº­t, 10:00
```

### VÃ­ dá»¥ 4: KHOBD + CÃ²n hÃ ng + Quáº­n 2 ca
```
Input: T7 10:00, district=2, cÃ²n hÃ ng
TÃ­nh: T7 10:00 + 24h = CN 10:00
Output: Chá»§ nháº­t, 10:00 (giá»¯ nguyÃªn vÃ¬ KHOBD)
```

---

## 8. So sÃ¡nh Logic Má»›i vs Legacy

| Äáº·c Ä‘iá»ƒm | Logic 2025 (Má»›i) | Legacy |
|----------|------------------|--------|
| **Thá»© tá»± Æ°u tiÃªn** | Quáº­n â†’ Kho | Promo â†’ Shop â†’ OOS â†’ Default |
| **Weekend Reset** | KhÃ´ng cÃ³ | CÃ³ (chá»‰ OOS) |
| **CÃ²n hÃ ng** | 24/7 + adjust CN | Default +1 WD |
| **Háº¿t hÃ ng** | Kho + skip/24/7 | SP_leadtime + reset |
| **Tá»‘c Ä‘á»™** | Nhanh hÆ¡n | Cháº­m hÆ¡n |
| **DÃ¹ng khi** | CÃ³ districtLeadtime | KhÃ´ng cÃ³ tham sá»‘ má»›i |

---

## 9. LÆ°u Ã½ quan trá»ng

### âš ï¸ Äiá»ƒm khÃ¡c biá»‡t lá»›n nháº¥t

| Logic | HÃ ng cÃ²n | HÃ ng háº¿t |
|-------|----------|----------|
| **2025** | 24/7 (CN adjust KHOHCM) | Skip/24/7 theo kho |
| **Legacy** | +1 working day | Weekend reset |

### ğŸ”‘ Quy táº¯c nhá»› nhanh

1. **KHOHCM** = Skip weekend, khÃ´ng giao Chá»§ nháº­t
2. **KHOBD** = 24/7, giao Ä‘Æ°á»£c cáº£ T7/CN
3. **Apollo/Kim TÃ­n** = LuÃ´n +6 ca (háº¿t hÃ ng)
4. **Háº¿t hÃ ng + KHOHCM** = Skip weekend (Mon-Fri)
5. **Háº¿t hÃ ng + KHOBD** = 24/7 (T7/CN tÃ­nh)

---

## 10. LiÃªn quan

- **File code**: `src/utils/computeDeliveryDate.ts`
- **API sá»­ dá»¥ng**: `pages/api/admin-app/save-sale-order-details.ts`
- **UI Form**: `src/app/admin-app/_components/SalesOrderForm.tsx`
